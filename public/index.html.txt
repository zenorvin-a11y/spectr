<!DOCTYPE html>
<html>
<head>
    <title>üåà –°–ü–ï–ö–¢–† –ü–†–û</title>
    <style>
        body { margin: 0; font-family: Arial; background: #000; color: #0f0; }
        .container { display: flex; height: 100vh; }
        .sidebar { width: 300px; background: #111; padding: 20px; }
        .main { flex: 1; padding: 20px; }
        .tab { padding: 10px; margin: 5px; background: #222; cursor: pointer; }
        .active { background: #0a0; }
    </style>
</head>
<body>
    <div class="container">
        <div class="sidebar">
            <h2>üåà –°–ü–ï–ö–¢–† –ü–†–û</h2>
            <div class="tab active" onclick="showTab('chats')">üí¨ –ß–∞—Ç—ã</div>
            <div class="tab" onclick="showTab('contacts')">üë• –ö–æ–Ω—Ç–∞–∫—Ç—ã</div>
            <div class="tab" onclick="showTab('groups')">üëë –ì—Ä—É–ø–ø—ã</div>
            <div class="tab" onclick="showTab('channels')">üì¢ –ö–∞–Ω–∞–ª—ã</div>
            <div class="tab" onclick="showTab('report')">üö® –ñ–∞–ª–æ–±–∞</div>
        </div>
        <div class="main" id="content">
            <!-- –ö–æ–Ω—Ç–µ–Ω—Ç –±—É–¥–µ—Ç –∑–¥–µ—Å—å -->
        </div>
    </div>
    
    <script src="/socket.io/socket.io.js"></script>
    <script>
        const socket = io();
        let currentUser = null;
        
        // –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
        const username = prompt('–í–≤–µ–¥–∏ –∏–º—è:') || 'User' + Math.random().toString(36).substr(2, 5);
        socket.emit('register', { username, avatar: 'üë§' });
        
        socket.on('registered', (data) => {
            currentUser = data;
            showTab('chats');
        });
        
        // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –≤–∫–ª–∞–¥–æ–∫
        function showTab(tab) {
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            event.target.classList.add('active');
            
            let content = '';
            if (tab === 'chats') content = '<h3>üí¨ –õ–∏—á–Ω—ã–µ —á–∞—Ç—ã</h3><p>–í—ã–±–µ—Ä–∏ –∫–æ–Ω—Ç–∞–∫—Ç –¥–ª—è –æ–±—â–µ–Ω–∏—è</p>';
            if (tab === 'contacts') content = '<h3>üë• –ö–æ–Ω—Ç–∞–∫—Ç—ã</h3><input placeholder="–î–æ–±–∞–≤–∏—Ç—å –∫–æ–Ω—Ç–∞–∫—Ç..."><button>–î–æ–±–∞–≤–∏—Ç—å</button>';
            if (tab === 'groups') content = '<h3>üëë –ì—Ä—É–ø–ø—ã</h3><button>–°–æ–∑–¥–∞—Ç—å –≥—Ä—É–ø–ø—É</button>';
            if (tab === 'channels') content = '<h3>üì¢ –ö–∞–Ω–∞–ª—ã</h3><button>–°–æ–∑–¥–∞—Ç—å –∫–∞–Ω–∞–ª</button>';
            if (tab === 'report') content = `
                <h3>üö® –û—Ç–ø—Ä–∞–≤–∏—Ç—å –∂–∞–ª–æ–±—É</h3>
                <textarea id="reportText" placeholder="–û–ø–∏—à–∏—Ç–µ –ø—Ä–æ–±–ª–µ–º—É..." rows="5"></textarea><br>
                <button onclick="sendReport()">–û—Ç–ø—Ä–∞–≤–∏—Ç—å –Ω–∞ –ø–æ—á—Ç—É</button>
            `;
            
            document.getElementById('content').innerHTML = content;
        }
        
        // –û—Ç–ø—Ä–∞–≤–∫–∞ –∂–∞–ª–æ–±—ã
        function sendReport() {
            const text = document.getElementById('reportText').value;
            fetch('/report', {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify({ details: text })
            }).then(() => alert('–ñ–∞–ª–æ–±–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞!'));
        }
        
        // –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–∞
        function uploadFile() {
            const input = document.createElement('input');
            input.type = 'file';
            input.onchange = (e) => {
                const formData = new FormData();
                formData.append('file', e.target.files[0]);
                fetch('/upload', { method: 'POST', body: formData })
                    .then(res => res.json())
                    .then(data => console.log('–§–∞–π–ª –∑–∞–≥—Ä—É–∂–µ–Ω:', data.url));
            };
            input.click();
        }
    </script>
</body>
</html>